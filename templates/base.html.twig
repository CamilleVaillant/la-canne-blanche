<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>{% block title %}La Canne Blanche{% endblock %}</title>

        <!-- Web App Meta -->
        <meta name="apple-mobile-web-app-title" content="La Canne Blanche" />
        <link rel="manifest" href="{{ asset('site.webmanifest') }}" />

        <!-- Favicon -->
        <link rel="icon" type="image/png" href="{{ asset('favicon-96x96.png') }}" sizes="96x96" />
        <link rel="icon" type="image/svg+xml" href="{{ asset('favicon.svg') }}" />
        <link rel="shortcut icon" href="{{ asset('favicon.ico') }}" />
        <link rel="apple-touch-icon" sizes="180x180" href="{{ asset('apple-touch-icon.png') }}" />


        {% block stylesheets %}
            {{ encore_entry_link_tags('app') }}
            {{ encore_entry_script_tags('app') }}
        {% endblock %}

        {% block javascripts %}
            {# {{ encore_entry_script_tags('app') }}
            {% block importmap %}{{ importmap('app') }}{% endblock %} #}
        {% endblock %}
    </head>
    <body>

        <nav>
             <!-- Menu burger -->
            <div class="menu-toggle" id="menu-toggle">
                <span class="bar"></span>
                <span class="bar"></span>
                <span class="bar"></span>
            </div>

            {# Menu de navigation #}

            <ul class="nav-list" id="nav-list">
                    
            
                <li><a class="{% if app.request.attributes.get('_route') == 'app_home' %} active {% endif %}" href="{{ path('app_home') }}">le salon</a></li>
                <li><a class="{% if app.request.attributes.get('_route') == 'app_team' %} active {% endif %}" href="{{ path('app_team') }}">l'equipe</a></li>
                <li><a class="{% if app.request.attributes.get('_route') == 'app_gallery' %} active {% endif %}" href="{{ path('app_gallery') }}">gallerie</a></li>

               
               

            </ul>
        </nav>

        {% block body %}{% endblock %}

        <footer>
            <ul>
                <li><h1>la canne blanche</h1></li>
                <li><a href="">56 Cours de l'Agonne Bordeaux</a></li>
                <li><a href="">la Canne Blanche</a></li>
            </ul>
            <ul>
                <li>
                    <p>Lundi.....ferm√©</p>
                </li>
                <li>
                    <p>Mardi.....11h/19h</p>
                </li>
                <li>
                    <p>Mercredi....11h/19h</p>
                </li>
                <li>
                    <p>Jeudi.....11h/19h</p>
                </li>
                <li>
                    <p>Vendredi.....11h/19h</p>
                </li>
                <li>
                    <p>Samedi.....11h/19h</p>
                </li>
                <li>
                    <p>Dimanche.....ferm√©</p>
                </li>
            </ul>
            <ul>
                <li><p>¬© 2025 La Canne Blanche. Tous droits r√©serv√©s.</p></li>
                <li><a href="#">üîê Politique de confidentialit√©</a></li>
                <li><a href="#">üìú Mentions l√©gales</a></li>
            </ul>
        </footer>


        <script>
        let lastScrollTop = 0;
            const nav = document.querySelector('nav');

            window.addEventListener('scroll', () => {
            const currentScroll = window.pageYOffset || document.documentElement.scrollTop;

            if (currentScroll > lastScrollTop) {
                // On scroll vers le bas
                nav.classList.add('nav--hidden');
            } else {
                // On scroll vers le haut
                nav.classList.remove('nav--hidden');
            }

            lastScrollTop = currentScroll <= 0 ? 0 : currentScroll; // pour iOS
            });

        </script>

        <script>
            document.querySelectorAll('.toggle-bio-btn').forEach(button => {
                button.addEventListener('click', () => {
                    const targetId = button.getAttribute('data-target');
                    const bio = document.getElementById(targetId);
                    if (bio) {
                        bio.classList.toggle('hidden');
                    }
                });
            });
        </script>
        <script>
            document.addEventListener('DOMContentLoaded', function () {
                const lightbox = document.getElementById('lightbox');
                const lightboxImg = document.getElementById('lightbox-img');
                const closeBtn = document.querySelector('#lightbox .close');

                document.querySelectorAll('#gallery .card img').forEach(img => {
                    img.addEventListener('click', () => {
                        lightboxImg.src = img.src;
                        lightbox.classList.add('active');
                    });
                });

                closeBtn.addEventListener('click', () => {
                    lightbox.classList.remove('active');
                });

                lightbox.addEventListener('click', (e) => {
                    if (e.target === lightbox) {
                        lightbox.classList.remove('active');
                    }
                });
            });

        </script>

        <script>
            document.querySelectorAll('.open-edit-modal').forEach(btn => {
            btn.addEventListener('click', async () => {
                const tatooId = btn.dataset.id;
                const response = await fetch(`/tatoo/${tatooId}/edit`); // route √† adapter
                const html = await response.text();
                document.getElementById('modal-form-container').innerHTML = html;
                document.getElementById('editModal').classList.remove('hidden');
            });
            });

            document.querySelector('.modal .close').addEventListener('click', () => {
            document.getElementById('editModal').classList.add('hidden');
            });
        </script>

        <script>
            document.addEventListener('DOMContentLoaded', () => {
            const modal = document.getElementById('editModal');
            const modalContainer = document.getElementById('modal-form-container');
            const closeModal = modal.querySelector('.close');

            // Ouvrir la modale et charger le formulaire par AJAX
            document.querySelectorAll('.open-edit-modal').forEach(button => {
                button.addEventListener('click', async () => {
                const tatooId = button.dataset.id;
                try {
                    const response = await fetch(`/tatoo/${tatooId}/edit`);
                    if (!response.ok) throw new Error('Erreur lors du chargement du formulaire');
                    const html = await response.text();
                    modalContainer.innerHTML = html;
                    modal.classList.remove('hidden');

                        // √âventuellement, g√©rer la soumission AJAX ici, sinon laisse le form normal

                    } catch (error) {
                        alert(error.message);
                    }
                    });
                });

                // Fermer la modale au clic sur la croix
                closeModal.addEventListener('click', () => {
                    modal.classList.add('hidden');
                    modalContainer.innerHTML = ''; // reset contenu
                });

            // Fermer la modale au clic √† l‚Äôext√©rieur du contenu
            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                modal.classList.add('hidden');
                modalContainer.innerHTML = '';
                }
            });
            });
            document.querySelectorAll('.open-edit-modal').forEach(button => {
    button.addEventListener('click', function() {
        const tatooId = this.dataset.id;
        fetch(`/tatoo/edit/${tatooId}`)
            .then(response => response.text())
            .then(html => {
                document.getElementById('modal-form-container').innerHTML = html;
                document.getElementById('editModal').classList.remove('hidden');

                // Ajoute un √©couteur sur la croix pour fermer la modale
                document.querySelector('#editModal .close').addEventListener('click', () => {
                    document.getElementById('editModal').classList.add('hidden');
                    document.getElementById('modal-form-container').innerHTML = '';
                });

                // Optionnel : g√©rer la soumission AJAX du formulaire ici
            });
    });
});

        </script>

    </body>
</html>
